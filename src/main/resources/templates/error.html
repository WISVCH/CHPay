<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/basic-layout}">
<head>
    <title>Error</title>
</head>
<body>
<div layout:fragment="main-content">
    <div class="flex items-center justify-center px-4 py-10">
        <div class="card bg-base-100 shadow-lg border border-base-content/10 hover:shadow-xl transition-shadow w-full max-w-sm">
            <div class="card-body items-center text-center space-y-4">
                <!-- Error Icon -->
                <div class="avatar avatar-placeholder">
                    <div class="bg-error/20 text-error size-16 rounded-full">
                        <span class="icon-[tabler--alert-triangle] size-8"></span>
                    </div>
                </div>
                
                <!-- Status Code -->
                <div class="text-3xl font-bold text-error"
                     th:text="${statuscode} ?: ${status}">
                </div>

                <!-- Title -->
                <h1 class="text-2xl font-bold text-base-content">Error Occurred</h1>
                
                <!-- Error Details -->
                <div class="text-base-content/70 text-sm space-y-2">
                    <p th:text="${errorname} ?: ${error}">
                    </p>
                    <p th:if="${message}"
                       th:text="${currentUser != null and currentUser.getBanned()} ? 'You are banned from accessing this feature.' : ${message}">
                        Message details
                    </p>
                    <p th:if="${timestamp}"
                       th:text="${#dates.format(timestamp, 'dd-MM-yyyy HH:mm:ss')}">
                        Timestamp
                    </p>
                </div>

                <!-- Stack Trace (if available) -->
                <div th:if="${trace}" class="bg-base-200 rounded-lg p-3 text-xs text-base-content/60 text-left w-full">
                    <pre th:text="${trace}">Stack trace</pre>
                </div>

                <!-- Action Buttons -->
                <div class="w-full space-y-3">
                    <a href="/" class="btn btn-primary btn-lg btn-block">
                        <span class="icon-[tabler--home] size-5"></span>
                        Return to Home
                    </a>
                    
                    <div sec:authorize="isAuthenticated()">
                        <form th:action="@{/logout}" method="post">
                            <button type="submit" class="btn btn-outline btn-block">
                                <span class="icon-[tabler--logout] size-4"></span>
                                Logout
                            </button>
                        </form>
                        <p class="text-xs text-base-content/60 mt-2">Logged in as: <span sec:authentication="name"></span></p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
</html>